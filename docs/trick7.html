<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Trick 7 - Aggregate data | Ten SPSS tricks to make your peers jealous</title>
  <meta name="description" content="Chapter 3 Trick 7 - Aggregate data | Ten SPSS tricks to make your peers jealous" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Trick 7 - Aggregate data | Ten SPSS tricks to make your peers jealous" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Trick 7 - Aggregate data | Ten SPSS tricks to make your peers jealous" />
  
  
  

<meta name="author" content="Bernard Liew" />


<meta name="date" content="2021-05-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="bag-of-tricks.html"/>
<link rel="next" href="practice.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="bag-of-tricks.html"><a href="bag-of-tricks.html"><i class="fa fa-check"></i><b>2</b> Bag of tricks</a>
<ul>
<li class="chapter" data-level="2.1" data-path="bag-of-tricks.html"><a href="bag-of-tricks.html#trick1"><i class="fa fa-check"></i><b>2.1</b> Trick 1 - Paste to syntax</a></li>
<li class="chapter" data-level="2.2" data-path="bag-of-tricks.html"><a href="bag-of-tricks.html#trick2"><i class="fa fa-check"></i><b>2.2</b> Trick 2 - Setting your work directory</a></li>
<li class="chapter" data-level="2.3" data-path="bag-of-tricks.html"><a href="bag-of-tricks.html#trick3"><i class="fa fa-check"></i><b>2.3</b> Trick 3 - Importing data</a></li>
<li class="chapter" data-level="2.4" data-path="bag-of-tricks.html"><a href="bag-of-tricks.html#trick4"><i class="fa fa-check"></i><b>2.4</b> Trick 4 - Rename columns</a></li>
<li class="chapter" data-level="2.5" data-path="bag-of-tricks.html"><a href="bag-of-tricks.html#trick5"><i class="fa fa-check"></i><b>2.5</b> Trick 5 - Filter rows</a></li>
<li class="chapter" data-level="2.6" data-path="bag-of-tricks.html"><a href="bag-of-tricks.html#trick6"><i class="fa fa-check"></i><b>2.6</b> Trick 6 - Create new variables</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="trick7.html"><a href="trick7.html"><i class="fa fa-check"></i><b>3</b> Trick 7 - Aggregate data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="trick7.html"><a href="trick7.html#trick8"><i class="fa fa-check"></i><b>3.1</b> Trick 8 - Group by function</a></li>
<li class="chapter" data-level="3.2" data-path="trick7.html"><a href="trick7.html#trick9"><i class="fa fa-check"></i><b>3.2</b> Trick 9 - Wide to long</a></li>
<li class="chapter" data-level="3.3" data-path="trick7.html"><a href="trick7.html#trick10"><i class="fa fa-check"></i><b>3.3</b> Trick 10 - Long to wide</a></li>
<li class="chapter" data-level="3.4" data-path="trick7.html"><a href="trick7.html#conclusion"><i class="fa fa-check"></i><b>3.4</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="practice.html"><a href="practice.html"><i class="fa fa-check"></i><b>4</b> Practice</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Ten SPSS tricks to make your peers jealous</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="trick7" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Trick 7 - Aggregate data</h1>
<p>You may want to find some summary statistics for each level of a grouping variable. In the example below, I want to calculate for each id, in each group, at each time, find the mean (<code>MEAN</code>), minimum (<code>MIN</code>), maximum (<code>MAX</code>), standard deviation (<code>SD</code>), and median (<code>MEDIAN</code>) of the following variables (<code>aexttorq</code>, <code>aextwork</code>, <code>aextpow</code>). When you see this argument, <code>/aexttorq_mean=MEAN(aexttorq)</code>, the value before <code>=</code> represents the new variable name. However many aggregate values you desire, add as many arguments on a separate line. In this command, the aggregate data is pasted onto a separate data window called <code>aggregate_data</code> - you can give the new data window any name.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="trick7.html#cb6-1" aria-hidden="true" tabindex="-1"></a>DATASET DECLARE aggregate_data.</span>
<span id="cb6-2"><a href="trick7.html#cb6-2" aria-hidden="true" tabindex="-1"></a>AGGREGATE</span>
<span id="cb6-3"><a href="trick7.html#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">/</span>OUTFILE<span class="ot">=</span><span class="st">&#39;aggregate_data&#39;</span></span>
<span id="cb6-4"><a href="trick7.html#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="sc">/</span>BREAK<span class="ot">=</span>id grp time </span>
<span id="cb6-5"><a href="trick7.html#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">/</span>aexttorq_mean<span class="ot">=</span><span class="fu">MEAN</span>(aexttorq) </span>
<span id="cb6-6"><a href="trick7.html#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="sc">/</span>aextwork_min<span class="ot">=</span><span class="fu">MIN</span>(aextwork) </span>
<span id="cb6-7"><a href="trick7.html#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="sc">/</span>aextpow_max<span class="ot">=</span><span class="fu">MAX</span>(aextpow) </span>
<span id="cb6-8"><a href="trick7.html#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="sc">/</span>aexttorq_sd<span class="ot">=</span><span class="fu">SD</span>(aexttorq) </span>
<span id="cb6-9"><a href="trick7.html#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="sc">/</span>aextwork_median<span class="ot">=</span><span class="fu">MEDIAN</span>(aextwork).</span></code></pre></div>
<p>After aggregating this is what the data looks like in Figure <a href="trick7.html#fig:aggregate">3.1</a>.</p>
<div class="figure"><span id="fig:aggregate"></span>
<img src="images/aggregate.png" alt="Aggregated summary" width="100%" />
<p class="caption">
Figure 3.1: Aggregated summary
</p>
</div>
<div id="trick8" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Trick 8 - Group by function</h2>
<p>Many times you want to do the same thing repeatedly on certain chunks of data. For example, you want to find the mean strength on each level of sex (male, female), or even each level of the combination of sex-side (male-right, male-left, female-right, female-left). Precede whatever function you want to execute, with the command below. In the command below, I want to do the same analysis for each level of the combination of <code>grp</code> and <code>side</code>. This works for categorical variables. Replace <code>grp</code> and <code>side</code> with however many variables you want to split the data by.</p>
<p><em>PS</em> This means you can run the same stats on each split of the data by running the stats only once if you use this command.</p>
<p>Highlight this command and press the play button.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="trick7.html#cb7-1" aria-hidden="true" tabindex="-1"></a>SORT CASES  BY grp side.</span>
<span id="cb7-2"><a href="trick7.html#cb7-2" aria-hidden="true" tabindex="-1"></a>SPLIT FILE SEPARATE BY grp side.</span></code></pre></div>
<p>After grouping the data, when I ran a descriptive analysis, this is what the results looks like in Figure <a href="trick7.html#fig:group-by">3.2</a>.</p>
<div class="figure"><span id="fig:group-by"></span>
<img src="images/group-by.PNG" alt="Group-by descriptives" width="60%" />
<p class="caption">
Figure 3.2: Group-by descriptives
</p>
</div>
</div>
<div id="trick9" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Trick 9 - Wide to long</h2>
<div class="figure"><span id="fig:ugly"></span>
<img src="images/wide_data.png" alt="Wide data" width="100%" />
<p class="caption">
Figure 3.3: Wide data
</p>
</div>
<p>Typically data is keyed into Excel in the wide format like in Figure <a href="trick7.html#fig:ugly">3.3</a>. In &gt; 90% of any data analysis, data should <strong>NOT</strong> be in this format. The only thing I know in SPSS that requires data to be in the wide format is when you want to use Repeated Measures Anova or a Paired t test. So it is useful to know how to convert a data to a long format since &gt; 90% of SPSS function requires data to be in a long format.</p>
<p><code>/MAKE val FROM aexttorq_pre aexttorq_post</code> says collect all the variables <code>aexttorq_pre</code>, <code>aexttorq_post</code> and stack their values on top of each other. The column containing the values is called <code>val</code>. The column where the names of the values are stored is called <code>mediator</code>. Remember, you can call the new columns anything you want. <code>/KEEP=id grp time</code> simple says keep the following columns in the new data.</p>
<p>Highlight this command and press the play button.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="trick7.html#cb8-1" aria-hidden="true" tabindex="-1"></a>VARSTOCASES</span>
<span id="cb8-2"><a href="trick7.html#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">/</span>MAKE val FROM aexttorq_pre aexttorq_post </span>
<span id="cb8-3"><a href="trick7.html#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">/</span>INDEX<span class="ot">=</span><span class="fu">mediator</span>(val) </span>
<span id="cb8-4"><a href="trick7.html#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="sc">/</span>KEEP<span class="ot">=</span>id grp time</span>
<span id="cb8-5"><a href="trick7.html#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">/</span><span class="cn">NULL</span><span class="ot">=</span>KEEP.</span></code></pre></div>
<p>After running the command, this is what the results looks like in Figure <a href="trick7.html#fig:tidy">3.4</a>.</p>
<div class="figure"><span id="fig:tidy"></span>
<img src="images/long_data.png" alt="Long data" width="100%" />
<p class="caption">
Figure 3.4: Long data
</p>
</div>
</div>
<div id="trick10" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Trick 10 - Long to wide</h2>
<p>Just in case you need to make the data wide again. The two key commands are <code>/ID=id grp time</code> and <code>/INDEX=mediator</code>. <code>/ID</code> represents how each data point will be uniquely identified. <code>/INDEX</code> represents the variable you want to spread by.</p>
<p>Notice that trick <a href="trick7.html#trick10">3.3</a> and <a href="trick7.html#trick9">3.2</a> are mirror images. the <code>/ID</code> command in trick 10 should be identical to the <code>/KEEP</code> in trick <a href="trick7.html#trick9">3.2</a>. The <code>/INDEX</code> in both tricks <a href="trick7.html#trick10">3.3</a> and <a href="trick7.html#trick9">3.2</a> should contain the variable name you want to spread by.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="trick7.html#cb9-1" aria-hidden="true" tabindex="-1"></a>CASESTOVARS</span>
<span id="cb9-2"><a href="trick7.html#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">/</span>ID<span class="ot">=</span>id grp time</span>
<span id="cb9-3"><a href="trick7.html#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">/</span>INDEX<span class="ot">=</span>mediator</span>
<span id="cb9-4"><a href="trick7.html#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="sc">/</span>GROUPBY<span class="ot">=</span>VARIABLE.</span></code></pre></div>
<p>After running the command, the data looks like in Figure <a href="trick7.html#fig:ugly">3.3</a> again.</p>
</div>
<div id="conclusion" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Conclusion</h2>
<p>Notice how I did not even touch of saving any outputs. The reason for that is that one should first save all the commands ran rather than the results. Saving the process allows you to replicate your actions, saving your results will not.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="bag-of-tricks.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="practice.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["wrangling.pdf", "wrangling.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
